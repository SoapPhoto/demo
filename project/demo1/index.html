<!DOCTYPE html>
<html>
<head>
  <title>ife群成员分布</title>
  <style type="text/css">
      html,body{
        height: 100%;
      }
      #content{
        width: 200px; height: 100%; overflow-y: scroll; float: left;
      }
      #main{
        width: calc(100% - 400px);height: 100%; float: left;
      }
      h1{
        text-align: center;
      }
  </style>
<script type="text/javascript" src="static/echarts.min.js"></script>
<script type="text/javascript" src="static/china.js"></script>
</head>
<body>
<h1>统计百度前端学院的群成员的城市分布TOP20</h1>
<p>思路： 扒下来群成员的备注（备注基本都是[城市名]-[昵称]），然后序列化成数组，处理成{city:count}，然后在echart上输出，就OK啦</p>
<div id="content"></div>
<div id="main"></div>
<script type="text/javascript">
var arrList =["上海","美国","杭州","海口","厦门","吉林","上海","深圳","北京","北京","扬州","武汉","大连","天津","长沙","天津","温州","成都","上海","武汉","北京","江苏","成都","杭州","长沙","北京","保定","汕头","郑州","上海","北京","上海","北京","加拿大","杭州","杭州","南京","无锡","深圳","北京","北京","成都","招聘","北京","成都","镇江","沈阳","合肥","武汉","北京","广州","深圳","武汉","北京","广州","杭州","上海","上海","泉州","杭州","武汉","厦门","北京","北京","保定","上海","北京","江西","北京","上海","东京","常熟","西安","成都","东莞","长沙","重庆","北京","上海","温州","北京","武汉","北京","南京","上海","上海","西安","北京","武汉","上海","上海","太原","重庆","成都","常熟","太原","北京","上海","武汉","上海","北京","百度","咸宁","重庆","西安","台州","重庆","天津","成都","南昌","上海","天津","山西","深圳","哈尔滨","北京","武汉","广州","济南","广州","杭州","北京","百度","广州","杭州","大连","广州","成都","北京","南京","广州","麻省","济南","北京","杭州","西安","济南","湖州","上海","北京","上海","北京","广州","湖南","武汉","深圳","广州","厦门","福州","广州","深圳","武汉","深圳","赣州","珠海","南昌","海口","西安","西安","深圳","北京","北京","厦门","成都","长沙","武汉","成都","南宁","镇江","深圳","成都","哈尔滨","吉林","广州","深圳","杭州","武汉","哈尔滨","百度","天津","南昌","广州","烟台","南宁","北京","北京","杭州","杭州","海口","大连","浙江","济南","成都","成都","长沙","汕头","长沙","广州","南京","广州","成都","旧金山","广州","重庆","北京","重庆","北京","上海","重庆","重庆","东莞","北京","深圳","桂林","大连","西安","太原","广州","成都","深圳","深圳","北京","广州","昆明","合肥","哈尔滨","广州","武汉","广州","西安","布村","上海","广州","广州","北京","北京","南京","蚌埠","太原","广州","北京","深圳","淮北","杭州","武汉","北京","西安","大连","杭州","温哥华","上海","武汉","上海","南昌","南京","上海","成都","深圳","上海","上海","成都","重庆","广州","战狼","西安","广州","太原","济南","北京","苏州","广州","成都","青岛","北京","杭州","深圳","曼城","广州","广州","杭州","天津","北京","武汉","上海","重庆","温州","南昌","哈尔滨","北京","北京","北京","北京","重庆","成都","焦作","北京","深圳","北京","南京","深圳","哈尔滨","上海","南昌","北京","苏州","深圳呐呐(*","广州","重庆","杭州","北京","深圳","温州","咸鱼万岁","北京","哈尔滨","广州","上海","广州","北京","武汉","成都","武汉","杭州","武汉","福州","温州","西安","深圳","北京","石家庄","长沙","北京","长春","杭州","珠海","杭州","西安","杭州","北京","湘潭","厦门","上海","绍兴","杭州","广州","成都","廣州","台州","杭州","西安","广州","杭州","北京","∞","常州","齐齐哈尔","武汉","成都","广州","重庆","武汉","天津","广州","杭州","杭州","北京","南京","长沙","北京","上海","北京","大连","广州","武汉","武汉","济南","哈尔滨","北京","成都","重庆","哈哈哈","广州","哈尔滨","天津","深圳","益阳","上海","成都","上海","上海","郑州","五个非洲人","哈尔滨","西安","长沙","太原","北京","上海","哈尔滨","武汉","宁波","成都","成都","武汉","南昌","北京","西安","湖南","河北","中工","深圳","南昌","成都北京","嘉兴","北京","杭州","武汉","北京","湛江","南京","北京","北京","广州","杭州","武汉","泉州","重庆","新疆","上海","武汉","北京","合肥","五个非洲人","东莞","杭州","武汉","长沙","厦门","长春","绵阳","北京","西安箍","长沙","我的电脑","江西","长沙","长沙","北京","深圳","杭州","成都","山西","杭州","广州","保定","北京","深圳","西安","江苏","北京","重庆","南京","武汉","(","南京","上海","北京","西安","广州","北京","佛山風","宁波","北京","广州","上海","厦门","广东","大连","南宁","青岛","西安","北京","广州","广州","深圳","广州","杭州","重庆","广州","杭州","我的电脑","广州","成都","镇江","北京","北京","上海","南京","武汉","深圳","杭州","上海","广州","上海","太原","北京","湖北","杭州","广州","辽宁","天津","成都","上海","南京","重庆","重庆","武汉","成都","广州","大连","广州","杭州","天津","上海","哈尔滨","长沙","东莞","广州","成都","北京","西安","天津","常州","郑州","北京","北京","西安","无锡","杭州","广州","广州","郑州","广州","重庆","北京","西安","上海","烟台","江苏","上海","湖南","上海","良绅","湖南","秦皇岛","长沙","东莞","广州","九江","北京","长沙","福州","上海","惠州","武汉","南京","北京","无锡","芜湖","武汉","北京","北京","苏州","天津","西安","成都","浙江","济南","南京","北京","哈尔滨","北京","成都","深圳","常熟","美国","上海","北京","成都","南京","武汉","成都","哈尔滨","杭州","北京","北京","武汉","西安","杭州","深圳","北京","长沙","大连","杭州","杭州","西安","上海","广州","杭州","西安","重庆","成都","武汉","重庆","重庆","重庆","杭州","上海","山东","长沙","漳州","广州","杭州","广州","上海","深圳","杭州","南京","长沙","北京","北京","广州","重庆","广州","北京","北京","广东","南京","重庆","武汉","上海","北京","成都","南昌","西安","焦作","北京","合肥","广东","成都","济南","北京","长沙","天津","厦门","深圳","广州","北京","大连","上海","扬州","天津","广州","厦门","上海","青岛","西安","杭州","上海","重庆","郑州","南京","济南","长沙","广州","西安","南京","上海","重庆","成都","合肥","杭州","郑州","上海","大屁股啊","河南","广州","武汉","南宁","广州","天津","成都","湘潭","上海","广州","杭州","重庆","武汉","百度","广州","海口","潮州","杭州","广州","西安","北京","西安","上海","太原","北京","武汉","北京","深圳","北京","沈阳","深圳","哈尔滨","北京","南京","杭州","上海","北京","汕头","成都","深圳","秦皇岛","上海","天津","武汉","上海","成都","广州","上海","重庆","广州","杭州","广州","北京","福州","广州","深圳","重庆","西安","常熟","深圳","广州","厦门","昆山","厦门","上海","地点待定","苏州","前端之路","北京","常州","广州","北京","南昌","合肥","惠州","陕西","哈尔滨","南京","上海","南昌","深圳","深圳","宁波","厦门","广州","厦门","北京","广州","济南","北京","广州","南宁","台州","上海","北京","泉州","广州","南京","成都","杭州","杭州","南阳","成都","北京","杭州","北京","武汉","北京","合肥","重庆","北京","南京","呼和浩特","杭州","杭州","阡陌","湘潭","深圳","鲁能","南京","杭州","大连","北京","南昌","重庆","杭州","郑州","成都","厦门","广州","青岛","北京","长沙","太原","山东","南京","北京","北京","西安","成都","大连","武汉","南京:","郑州","武汉","西安","北京","淄博","上海","广州","初级班","上海","沈阳","深圳","长春","北京","西安","银川","南京","武夷山","新疆","杭州","南京","郑州","武汉","杭州","阳泉","哈尔滨","湘潭","重庆","广州","大连","北京","成都","南京","北京","广州","杭州","广州","武汉","南京","广州","青岛","北京","上海","厦门","北京","杭州","广州","杭州","深圳","潍坊","广州","深圳","杭州","广州","西安","上海","北京","上海","北京","北京","西安","上海","临汾","深圳","广州","深圳","秦皇岛","北京","武汉","长沙","西安","杭州","成都","潍坊","北京","苏州","武汉","北京","杭州","保定","深圳","杭州","成都","美国","成都","德州","西安","北京","南京","上海","无锡","北京","广州","成都","杭州","长沙","哈尔滨","北京","杭州","北京","江西","广州","广州","武汉","上海","北京","北京","北京","成都","杭州","河南","北京","成都","北京","北京","广州","北京","西安","杭州","西安","西安","陕西","武汉","北京","上海","西安","景德镇","广州","上海","江西","深圳","西安","徐州","上海","周口","长沙","成都","喵喵喵","顺德","前端之路","西安","深圳世界","上海","武汉","广州","北京","北京","广州","上海","广州","广州","成都","广州","北京","长沙","广州","深圳","合肥","北京","上海","成都","青岛","西安","天津","辽宁","湛江","杭州","广州","杭州","武汉","上海","重庆","南昌","厦门","北京","北京","合肥","上海","江西","上海","菜虽菜","天津","上海","湘潭","成都","北京","大连","广州","株洲","合肥","哈尔滨","哈尔滨","杭州","武汉","上海","西安","吉林基层","上海","广州","北京","西安","南京","武汉","上海","苏州","湖南","上海","大连","天津","青岛","武汉","北京","杭州","上海","武汉","北京","惠州","昆明","南京","山东","上海","北京","武汉","北京","长沙","春暖花开","大连","广州","北京","石家庄","西安","广州","厦门","南京","南京","深圳","徐州","南京","北京","广东","南昌","广州","杭州","北京","长沙","杭州","西安","北京","合肥","成都","郑州","北京","广州","长沙","荆州","广州梦醒","北京","杭州","保定","广东","淄博","福州","广州","北京","南昌","杭州","沈阳","重庆","北京","杭州","成都","青岛","郑州","成都","福州","南京","长沙","大连","广州","武汉","保定","成都","杭州","西安","南京","北京","开封","南阳","合肥","北京","安徽","哈尔滨","杭州","山东","深圳","西安","成都","南京","焦作","北京","江苏","天津","天津","重庆","广州","成都","北京","上海徐汇","重庆","江苏","广州","广州","广州","湖南","合肥","南京","南京","北京","青岛","北京","湘潭","成都","重庆","长春","南昌","上海","青岛","北京","湖南","广州","北京","武汉","哈尔滨","陕西","武汉","温州","北京","泉州","广州","深圳","重庆","重庆","西安","常熟","南京","贵阳","成都","重庆","郑州","长沙","武汉","南京","青岛","成都","成都","北京","北京","北京","北京","北京","杭州","湖北幻悠尘","南京","上海","沈阳","北京","北京","北京","徐州","晋中","银马座","上海","上海","南京","深圳","北京","合肥","陕西","杭州","广州","沈阳","北京","哈尔滨","吉安","武汉","北京","西安","武汉","杭州","龙岩","武汉","广州","武汉","江西","成都","南京","重庆","中山","广州","合肥","上海","蚌埠","上海","大连","榆次小帆","南京","杭州","南京","福清","北京","深圳","成都","天津","上海","太原","苏州杭州","武汉","广州","洛阳","郑州","北京","合肥","上海","珠海","广东","沈阳","武汉","北京","上海","江门"];



// 统计城市数
var citys = [];
for(var i=arrList.length; i--;){
    citys[arrList[i]] = (citys[arrList[i]] || 0) + 1;//累计次数
}
// console.log(citys);


// 将结果拼接成对象数组
var cityObj = [];
for(var k in citys){
  var i;
  i++;
  cityObj[i] = {'name':k, 'value':citys[k]};
}
// console.log(cityObj);

// 进行排序
var by = function(name){
    return function(o, p){
        var a, b;
        if (typeof o === "object" && typeof p === "object" && o && p) {
            a = o[name];
            b = p[name];
            if (a === b) {
                return 0;
            }
            if (typeof a === typeof b) {
                return a < b ? -1 : 1;
            }
            return typeof a < typeof b ? -1 : 1;
        }
        else {
            throw ("error");
        }
    }
}

cityObj.sort(by("value"));
// console.log(cityObj);
// console.log(JSON.stringify(cityObj));


// 从大到小排序输出结果
var con = "";
for(var i = cityObj.length-1; i>0; i--){
    con+= cityObj[i].name+":"+cityObj[i].value+"<br/>";
}

// 打印结果
var content = document.getElementById("content");
content.innerHTML = con;

var myChart = echarts.init(document.getElementById('main'));
var data = cityObj;

var geoCoordMap = {'海门':[121.15,31.89],'鄂尔多斯':[109.781327,39.608266],'招远':[120.38,37.35],'舟山':[122.207216,29.985295],'齐齐哈尔':[123.97,47.33],'盐城':[120.13,33.38],'赤峰':[118.87,42.28],'青岛':[120.33,36.07],'乳山':[121.52,36.89],'金昌':[102.188043,38.520089],'泉州':[118.58,24.93],'莱西':[120.53,36.86],'日照':[119.46,35.42],'胶南':[119.97,35.88],'南通':[121.05,32.08],'拉萨':[91.11,29.97],'云浮':[112.02,22.93],'梅州':[116.1,24.55],'文登':[122.05,37.2],'上海':[121.48,31.22],'攀枝花':[101.718637,26.582347],'威海':[122.1,37.5],'承德':[117.93,40.97],'厦门':[118.1,24.46],'汕尾':[115.375279,22.786211],'潮州':[116.63,23.68],'丹东':[124.37,40.13],'太仓':[121.1,31.45],'曲靖':[103.79,25.51],'烟台':[121.39,37.52],'福州':[119.3,26.08],'瓦房店':[121.979603,39.627114],'即墨':[120.45,36.38],'抚顺':[123.97,41.97],'玉溪':[102.52,24.35],'张家口':[114.87,40.82],'阳泉':[113.57,37.85],'莱州':[119.942327,37.177017],'湖州':[120.1,30.86],'汕头':[116.69,23.39],'昆山':[120.95,31.39],'宁波':[121.56,29.86],'湛江':[110.359377,21.270708],'揭阳':[116.35,23.55],'荣成':[122.41,37.16],'连云港':[119.16,34.59],'葫芦岛':[120.836932,40.711052],'常熟':[120.74,31.64],'东莞':[113.75,23.04],'河源':[114.68,23.73],'淮安':[119.15,33.5],'泰州':[119.9,32.49],'南宁':[108.33,22.84],'营口':[122.18,40.65],'惠州':[114.4,23.09],'江阴':[120.26,31.91],'蓬莱':[120.75,37.8],'韶关':[113.62,24.84],'嘉峪关':[98.289152,39.77313],'广州':[113.23,23.16],'延安':[109.47,36.6],'太原':[112.53,37.87],'清远':[113.01,23.7],'中山':[113.38,22.52],'昆明':[102.73,25.04],'寿光':[118.73,36.86],'盘锦':[122.070714,41.119997],'长治':[113.08,36.18],'深圳':[114.07,22.62],'珠海':[113.52,22.3],'宿迁':[118.3,33.96],'咸阳':[108.72,34.36],'铜川':[109.11,35.09],'平度':[119.97,36.77],'佛山':[113.11,23.05],'海口':[110.35,20.02],'江门':[113.06,22.61],'章丘':[117.53,36.72],'肇庆':[112.44,23.05],'大连':[121.62,38.92],'临汾':[111.5,36.08],'吴江':[120.63,31.16],'石嘴山':[106.39,39.04],'沈阳':[123.38,41.8],'苏州':[120.62,31.32],'茂名':[110.88,21.68],'嘉兴':[120.76,30.77],'长春':[125.35,43.88],'胶州':[120.03336,36.264622],'银川':[106.27,38.47],'张家港':[120.555821,31.875428],'三门峡':[111.19,34.76],'锦州':[121.15,41.13],'南昌':[115.89,28.68],'柳州':[109.4,24.33],'三亚':[109.511909,18.252847],'自贡':[104.778442,29.33903],'吉林':[126.57,43.87],'阳江':[111.95,21.85],'泸州':[105.39,28.91],'西宁':[101.74,36.56],'宜宾':[104.56,29.77],'呼和浩特':[111.65,40.82],'成都':[104.06,30.67],'大同':[113.3,40.12],'镇江':[119.44,32.2],'桂林':[110.28,25.29],'张家界':[110.479191,29.117096],'宜兴':[119.82,31.36],'北海':[109.12,21.49],'西安':[108.95,34.27],'金坛':[119.56,31.74],'东营':[118.49,37.46],'牡丹江':[129.58,44.6],'遵义':[106.9,27.7],'绍兴':[120.58,30.01],'扬州':[119.42,32.39],'常州':[119.95,31.79],'潍坊':[119.1,36.62],'重庆':[106.54,29.59],'台州':[121.420757,28.656386],'南京':[118.78,32.04],'滨州':[118.03,37.36],'贵阳':[106.71,26.57],'无锡':[120.29,31.59],'本溪':[123.73,41.3],'克拉玛依':[84.77,45.59],'渭南':[109.5,34.52],'马鞍山':[118.48,31.56],'宝鸡':[107.15,34.38],'焦作':[113.21,35.24],'句容':[119.16,31.95],'北京':[116.46,39.92],'徐州':[117.2,34.26],'衡水':[115.72,37.72],'包头':[110,40.58],'绵阳':[104.73,31.48],'乌鲁木齐':[87.68,43.77],'枣庄':[117.57,34.86],'杭州':[120.19,30.26],'淄博':[118.05,36.78],'鞍山':[122.85,41.12],'溧阳':[119.48,31.43],'库尔勒':[86.06,41.68],'安阳':[114.35,36.1],'开封':[114.35,34.79],'济南':[117,36.65],'德阳':[104.37,31.13],'温州':[120.65,28.01],'九江':[115.97,29.71],'邯郸':[114.47,36.6],'临安':[119.72,30.23],'兰州':[103.73,36.03],'沧州':[116.83,38.33],'临沂':[118.35,35.05],'南充':[106.110698,30.837793],'天津':[117.2,39.13],'富阳':[119.95,30.07],'泰安':[117.13,36.18],'诸暨':[120.23,29.71],'郑州':[113.65,34.76],'哈尔滨':[126.63,45.75],'聊城':[115.97,36.45],'芜湖':[118.38,31.33],'唐山':[118.02,39.63],'平顶山':[113.29,33.75],'邢台':[114.48,37.05],'德州':[116.29,37.45],'济宁':[116.59,35.38],'荆州':[112.239741,30.335165],'宜昌':[111.3,30.7],'义乌':[120.06,29.32],'丽水':[119.92,28.45],'洛阳':[112.44,34.7],'秦皇岛':[119.57,39.95],'株洲':[113.16,27.83],'石家庄':[114.48,38.03],'莱芜':[117.67,36.19],'常德':[111.69,29.05],'保定':[115.48,38.85],'湘潭':[112.91,27.87],'金华':[119.64,29.12],'岳阳':[113.09,29.37],'长沙':[113,28.21],'衢州':[118.88,28.97],'廊坊':[116.7,39.53],'菏泽':[115.480656,35.23375],'合肥':[117.27,31.86],'武汉':[114.31,30.52],'大庆':[125.03,46.58]
};

var convertData = function (data) {
    var res = [];
    for (var i = 0; i < data.length; i++) {
        var geoCoord = geoCoordMap[data[i].name];
        if (geoCoord) {
            res.push({
                name: data[i].name,
                value: geoCoord.concat(data[i].value)
            });
        }
    }
    return res;
};

option = {
    backgroundColor: '#404a59',
    title: {
        text: '百度前端学院成员城市分布图',
        subtext: 'gggg',
        left: 'center',
        textStyle: {
            color: '#fff'
        }
    },
    tooltip : {
        trigger: 'item'
    },
    legend: {
        orient: 'vertical',
        y: 'bottom',
        x:'right',
        data:['mount'],
        textStyle: {
            color: '#fff'
        }
    },
    geo: {
        map: 'china',
        label: {
            emphasis: {
                show: false
            }
        },
        roam: true,
        itemStyle: {
            normal: {
                areaColor: '#323c48',
                borderColor: '#111'
            },
            emphasis: {
                areaColor: '#2a333d'
            }
        }
    },
    series : [
        {
            name: 'Top 20',
            type: 'effectScatter',
            coordinateSystem: 'geo',
            data: convertData(data.sort(function (a, b) {
                return b.value - a.value;
            }).slice(0, 20)),
            symbolSize: function (val) {
                return val[2] / 10;
            },
            showEffectOn: 'render',
            rippleEffect: {
                brushType: 'stroke'
            },
            hoverAnimation: true,
            label: {
                normal: {
                    formatter: '{b}',
                    position: 'right',
                    show: true
                }
            },
            itemStyle: {
                normal: {
                    color: '#f4e925',
                    shadowBlur: 10,
                    shadowColor: '#333'
                }
            },
            zlevel: 1
        }
    ]
};

myChart.setOption(option);

</script>
</body>
</html>